function q2w3_sidebar(e){function i(){}function o(i){var o=i.offset_top-i.fixed_margin_top,t=s-e.margin_bottom;e.stop_id&&(t=jQuery("#"+e.stop_id).offset().top-e.margin_bottom);var d;d=e.width_inherit?"inherit":i.obj.css("width");var n=!1,g=!1,b=!1;jQuery(window).on("scroll."+e.sidebar,function(e){var s=jQuery(this).scrollTop();s+i.fixed_margin_bottom>=t?(g||(i.obj.css("position","fixed"),i.obj.css("top",""),i.obj.css("width",d),jQuery("#"+i.clone_id).length<=0&&i.obj.before(i.clone),g=!0,n=!1,b=!1),i.obj.css("bottom",s+r+i.next_widgets_height-t)):s>=o?n||(i.obj.css("position","fixed"),i.obj.css("top",i.fixed_margin_top),i.obj.css("bottom",""),i.obj.css("width",d),jQuery("#"+i.clone_id).length<=0&&i.obj.before(i.clone),n=!0,g=!1,b=!1):b||(i.obj.css("position",""),i.obj.css("top",""),i.obj.css("width",""),jQuery("#"+i.clone_id).length>0&&jQuery("#"+i.clone_id).remove(),b=!0,n=!1,g=!1)}).trigger("scroll."+e.sidebar),jQuery(window).on("resize",function(){jQuery(window).width()<=e.screen_max_width&&(jQuery(window).off("load."+e.sidebar+" scroll."+e.sidebar),i.obj.css("position",""),i.obj.css("top",""),i.obj.css("width",""),i.obj.css("margin",""),i.obj.css("padding",""),jQuery("#"+i.clone_id).length>0&&jQuery("#"+i.clone_id).remove(),b=!0,n=!1,g=!1)}).trigger("resize")}if(!e.widgets)return!1;if(e.widgets.length<1)return!1;e.sidebar||(e.sidebar="q2w3-default-sidebar");var t=new Array,r=jQuery(window).height(),s=jQuery(document).height(),d=e.margin_top;jQuery("#wpadminbar").is(":visible")&&(d=e.margin_top+jQuery("#wpadminbar").height()),jQuery(".q2w3-widget-clone-"+e.sidebar).remove();for(var n=0;n<e.widgets.length;n++)widget_obj=jQuery("#"+e.widgets[n]),widget_obj.css("position",""),widget_obj.attr("id")?(t[n]=new i,t[n].obj=widget_obj,t[n].clone=widget_obj.clone(),t[n].clone.children().remove(),t[n].clone_id=widget_obj.attr("id")+"_clone",t[n].clone.addClass("q2w3-widget-clone-"+e.sidebar),t[n].clone.attr("id",t[n].clone_id),t[n].clone.css("height",widget_obj.height()),t[n].clone.css("visibility","hidden"),t[n].offset_top=widget_obj.offset().top,t[n].fixed_margin_top=d,t[n].height=widget_obj.outerHeight(!0),t[n].fixed_margin_bottom=d+t[n].height,d+=t[n].height):t[n]=!1;for(var g,b=0,n=t.length-1;n>=0;n--)t[n]&&(t[n].next_widgets_height=b,t[n].fixed_margin_bottom+=b,b+=t[n].height,g||(g=widget_obj.parent(),g.css("height",""),g.height(g.height())));jQuery(window).off("load."+e.sidebar+" scroll."+e.sidebar);for(var n=0;n<t.length;n++)t[n]&&o(t[n])}